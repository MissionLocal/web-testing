import{S as rt,i as ot,s as Re,e as ae,n as de,d as V,a as qe,r as ct,t as Z,b as Oe,c as p,f as we,g as ve,h as W,j as m,l as N,k as Se,m as A,o as B,p as Ue,q as Ae,u as ft,v as ut,w as dt,x as ht,y as pt,z as Y,A as gt,B as mt,C as _t,D as kt,E as Me,F as yt,G as bt,H as ze,I as Ce,J as wt}from"./graph-CgLAlHSa.js";function Le(t,n,s){const a=t.slice();return a[70]=n[s],a}function Ee(t,n,s){const a=t.slice();return a[70]=n[s],a}function Te(t){let n,s,a;function f(){return t[16](t[70])}return{c(){n=A("button"),n.textContent=`${t[70]} `,p(n,"class","button"),p(n,"type","button"),Z(n,"primary",t[2].has(t[70]))},m(u,C){W(u,n,C),s||(a=N(n,"click",f),s=!0)},p(u,C){t=u,C[0]&2052&&Z(n,"primary",t[2].has(t[70]))},d(u){u&&V(n),s=!1,a()}}}function Fe(t){let n=t[4],s,a=Pe(t);return{c(){a.c(),s=pt()},m(f,u){a.m(f,u),W(f,s,u)},p(f,u){u[0]&16&&Re(n,n=f[4])?(a.d(1),a=Pe(f),a.c(),a.m(s.parentNode,s)):a.p(f,u)},d(f){f&&V(s),a.d(f)}}}function He(t){let n,s,a,f,u,C,v,S;function y(){return t[19](t[70])}return{c(){n=A("label"),s=A("input"),f=B(),u=A("span"),u.textContent=`${t[70]}`,C=B(),p(s,"type","checkbox"),s.checked=a=t[2].has(t[70]),p(n,"class","filter-item")},m(M,h){W(M,n,h),m(n,s),m(n,f),m(n,u),m(n,C),v||(S=N(s,"change",y),v=!0)},p(M,h){t=M,h[0]&4&&a!==(a=t[2].has(t[70]))&&(s.checked=a)},d(M){M&&V(n),v=!1,S()}}}function Pe(t){let n,s,a,f,u,C,v,S,y,M=ae(t[11]),h=[];for(let w=0;w<M.length;w+=1)h[w]=He(Le(t,M,w));return{c(){n=A("div"),s=A("label"),a=A("input"),u=B(),C=A("span"),C.textContent="All",v=B();for(let w=0;w<h.length;w+=1)h[w].c();p(a,"type","checkbox"),a.checked=f=t[2].size===0,p(s,"class","filter-item"),p(n,"class","filter-pop"),p(n,"role","dialog"),p(n,"aria-label","Filter topics")},m(w,j){W(w,n,j),m(n,s),m(s,a),m(s,u),m(s,C),m(n,v);for(let d=0;d<h.length;d+=1)h[d]&&h[d].m(n,null);S||(y=N(a,"change",t[18]),S=!0)},p(w,j){if(j[0]&4&&f!==(f=w[2].size===0)&&(a.checked=f),j[0]&6148){M=ae(w[11]);let d;for(d=0;d<M.length;d+=1){const T=Le(w,M,d);h[d]?h[d].p(T,j):(h[d]=He(T),h[d].c(),h[d].m(n,null))}for(;d<h.length;d+=1)h[d].d(1);h.length=M.length}},d(w){w&&V(n),qe(h,w),S=!1,y()}}}function je(t){let n,s,a;return{c(){n=A("button"),n.textContent="Clear",p(n,"class","button ghost search-clear"),p(n,"type","button")},m(f,u){W(f,n,u),s||(a=N(n,"click",t[10]),s=!0)},p:de,d(f){f&&V(n),s=!1,a()}}}function De(t){let n,s;return{c(){n=A("div"),s=Ue(t[1]),p(n,"class","search-status"),p(n,"aria-live","polite")},m(a,f){W(a,n,f),m(n,s)},p(a,f){f[0]&2&&Oe(s,a[1])},d(a){a&&V(n)}}}function vt(t){let n,s,a,f,u,C,v,S,y,M=t[2].size===0?"Select issue":`Filter (${t[2].size})`,h,w,j,d,T,O,J,Q,D,K,I,H,G=ae(t[11]),z=[];for(let r=0;r<G.length;r+=1)z[r]=Te(Ee(t,G,r));let E=t[3]&&Fe(t),L=t[0]&&je(t),g=t[1]&&De(t);return{c(){n=A("div"),s=A("div"),a=A("div"),f=A("div"),u=A("button"),u.textContent="All",C=B();for(let r=0;r<z.length;r+=1)z[r].c();v=B(),S=A("div"),y=A("button"),h=Ue(M),w=B(),E&&E.c(),j=B(),d=A("div"),T=A("input"),O=B(),L&&L.c(),J=B(),g&&g.c(),Q=B(),D=A("div"),K=A("div"),p(u,"class","button"),p(u,"type","button"),Z(u,"primary",t[2].size===0),p(f,"class","controls-buttons"),p(y,"class","button"),p(y,"type","button"),p(y,"aria-expanded",t[3]),Z(y,"primary",t[2].size>0),p(S,"class","controls-select"),p(T,"class","search-input"),p(T,"type","search"),p(T,"placeholder","Search…"),p(d,"class","controls-search"),p(a,"class","controls"),p(K,"class","info-content"),p(D,"class","info-panel"),p(D,"aria-live","polite"),ve(D,"display",t[7]?"block":"none"),p(s,"class","chart"),p(n,"class","network-chart")},m(r,b){W(r,n,b),m(n,s),m(s,a),m(a,f),m(f,u),m(f,C);for(let _=0;_<z.length;_+=1)z[_]&&z[_].m(f,null);m(a,v),m(a,S),m(S,y),m(y,h),m(S,w),E&&E.m(S,null),m(a,j),m(a,d),m(d,T),we(T,t[0]),m(d,O),L&&L.m(d,null),m(d,J),g&&g.m(d,null),m(s,Q),m(s,D),m(D,K),K.innerHTML=t[8],t[22](D),t[23](s),I||(H=[N(u,"click",t[15]),N(y,"click",t[17]),N(S,"pointerdown",Se(t[14])),N(T,"input",t[20]),N(T,"input",t[9]),N(T,"keydown",t[21]),N(a,"pointerdown",Se(t[13]))],I=!0)},p(r,b){if(b[0]&4&&Z(u,"primary",r[2].size===0),b[0]&6148){G=ae(r[11]);let _;for(_=0;_<G.length;_+=1){const P=Ee(r,G,_);z[_]?z[_].p(P,b):(z[_]=Te(P),z[_].c(),z[_].m(f,null))}for(;_<z.length;_+=1)z[_].d(1);z.length=G.length}b[0]&4&&M!==(M=r[2].size===0?"Select issue":`Filter (${r[2].size})`)&&Oe(h,M),b[0]&8&&p(y,"aria-expanded",r[3]),b[0]&4&&Z(y,"primary",r[2].size>0),r[3]?E?E.p(r,b):(E=Fe(r),E.c(),E.m(S,null)):E&&(E.d(1),E=null),b[0]&1&&T.value!==r[0]&&we(T,r[0]),r[0]?L?L.p(r,b):(L=je(r),L.c(),L.m(d,J)):L&&(L.d(1),L=null),r[1]?g?g.p(r,b):(g=De(r),g.c(),g.m(d,null)):g&&(g.d(1),g=null),b[0]&256&&(K.innerHTML=r[8]),b[0]&128&&ve(D,"display",r[7]?"block":"none")},i:de,o:de,d(r){r&&V(n),qe(z,r),E&&E.d(),L&&L.d(),g&&g.d(),t[22](null),t[23](null),I=!1,ct(H)}}}const Ne=4,St=140;function Be(t){return(t??"").toString().trim().toLowerCase()}function Ge(t){return t.notes?`<div class="info-description">${t.notes}</div>`:""}function At(t){return typeof CSS<"u"&&CSS.escape?CSS.escape(t):String(t).replace(/[^a-zA-Z0-9_-]/g,"_")}function R(t){var n;return((n=t.source)==null?void 0:n.id)??t.source}function q(t){var n;return((n=t.target)==null?void 0:n.id)??t.target}function Mt(t){const n=R(t),s=q(t);return`${n}→${s}`}function zt(t){var n;return(n=t.groups)!=null&&n.length?t.groups:["other"]}function Ct(t,n,s){const a=Ae.nodes,f=Ae.links,u=a,C=f;new Map(a.map(e=>[e.id,e]));let v="",S="";function y(e){const l=Be(e);if(!l)return null;const c=new Set;for(const i of a)Be(i.label).includes(l)&&c.add(i.id);return c}function M(){!r||!g||(r.selectAll("circle").classed("is-search-hi",!1).classed("is-search-dim",!1),g.selectAll("line").classed("is-search-hi",!1).classed("is-search-dim",!1),s(1,S=""))}function h(e){if(!r||!g)return;if(!e){M();return}const l=e.size;if(l===0){M(),s(1,S="No matches");return}s(1,S=l===1?"1 match":`${l} matches`),r.selectAll("circle").classed("is-search-hi",c=>e.has(c.id)).classed("is-search-dim",c=>!e.has(c.id)),g.selectAll("line").classed("is-search-hi",c=>e.has(R(c))&&e.has(q(c))).classed("is-search-dim",c=>!(e.has(R(c))&&e.has(q(c))))}function w(){s(3,O=!1);const e=y(v);h(e),U(),(k==null?void 0:k.type)==="node"&&ne(k.id),(k==null?void 0:k.type)==="link"&&k.key}function j(){s(0,v=""),s(1,S=""),h(null),U(),(k==null?void 0:k.type)==="node"&&ne(k.id)}let d=new Set;const T=()=>d.size===0;let O=!1,J=0;const Q=Array.from(new Set(a.flatMap(e=>{var l;return(l=e.groups)!=null&&l.length?e.groups:["other"]}))).sort(),D=Object.assign({});function K(e){for(const l of["png","jpg","jpeg","svg"]){const c=`../../assets/avatars/${e}.${l}`;if(D[c])return D[c]}return null}const I=new Map(a.map(e=>[e.id,K(e.id)]));let H,G,z,E,L,g,r,b=800,_=500,P,he,k=null,re=!1,pe="";const Ke=Array.from(new Set(a.flatMap(e=>{var l;return(l=e.groups)!=null&&l.length?[e.groups[0]]:["other"]}))),Ve=ft().domain(Ke).range(ut),te=e=>6+e.size*4;function We(e){const l=te(e)+Ne;e.x=Math.max(l,Math.min(b-l,e.x)),e.y=Math.max(l,Math.min(_-l,e.y))}const ge=e=>`
    <div class="info-label"><strong>${e.label}</strong></div>
    ${e.label_description?`<div class="info-description">${e.label_description}</div>`:""}
  `;function Je(e){const l=new Set([e]);for(const c of C){const i=R(c),o=q(c);i===e?l.add(o):o===e&&l.add(i)}return l}function ne(e){if(!r||!g)return;const l=Je(e);r.selectAll("circle").classed("is-hi",c=>l.has(c.id)).classed("is-dim",c=>!l.has(c.id)),g.selectAll("line").classed("is-hi",c=>R(c)===e||q(c)===e).classed("is-dim",c=>!(R(c)===e||q(c)===e))}function me(e){if(!r||!g)return;const l=R(e),c=q(e),i=new Set([l,c]);r.selectAll("circle").classed("is-hi",o=>i.has(o.id)).classed("is-dim",o=>!i.has(o.id)),g.selectAll("line").classed("is-hi",o=>o===e).classed("is-dim",o=>o!==e)}function se(){!r||!g||(r.selectAll("circle").classed("is-dim",!1).classed("is-hi",!1),g.selectAll("line").classed("is-dim",!1).classed("is-hi",!1))}function x(){return k!==null}function oe(){k=null,le(!0),se()}function Xe(){if(T())return null;const e=new Set;for(const l of a)zt(l).some(i=>d.has(i))&&e.add(l.id);return e}function U(){if(!r||!g)return;const e=Xe();if(!e){r.selectAll("circle").classed("is-cat-hi",!1).classed("is-cat-dim",!1),g.selectAll("line").classed("is-cat-hi",!1).classed("is-cat-dim",!1);return}r.selectAll("circle").classed("is-cat-hi",l=>e.has(l.id)).classed("is-cat-dim",l=>!e.has(l.id)),g.selectAll("line").classed("is-cat-hi",l=>e.has(R(l))&&e.has(q(l))).classed("is-cat-dim",l=>!(e.has(R(l))&&e.has(q(l))))}function $(e){let l;e==="all"?l=new Set:(l=new Set(d),l.has(e)?l.delete(e):l.add(e),Q.every(c=>l.has(c))&&(l=new Set)),s(2,d=l),k=null,le(!0),se(),h(y(v)),U(),s(4,J+=1)}let ce=null;function _e(){try{ce&&ce.sendHeight()}catch{}}function ke(){H&&H.style.setProperty("--panel-overlap",St+"px")}function ie(e){s(8,pe=e),s(7,re=!0)}function le(e=!1){!e&&x()||s(7,re=!1)}function Ye(){z=Y(H).insert("svg",":first-child").attr("class","net-svg").attr("width",b).attr("height",_),E=z.append("defs"),L=z.append("g"),g=L.append("g").attr("class","links"),r=L.append("g").attr("class","nodes"),he=g.selectAll("line").data(C,i=>(i.source.id??i.source)+"->"+(i.target.id??i.target)).join("line").attr("stroke","#999").attr("stroke-opacity",.6).attr("stroke-width",i=>1+3*(i.strength??.5)).style("cursor","pointer").style("pointer-events","stroke").on("pointerenter",function(i,o){this.parentNode.appendChild(this),Y(this).attr("stroke-opacity",.95).attr("stroke","#666").attr("stroke-width",F=>2+3*(F.strength??.5)),x()||(me(o),ie(Ge(o)))}).on("pointerleave",function(){Y(this).attr("stroke","#999").attr("stroke-opacity",.6).attr("stroke-width",i=>1+3*(i.strength??.5)),x()||(se(),le(!0))}).on("pointerdown",(i,o)=>{const F=Mt(o);(k==null?void 0:k.type)==="link"&&k.key===F?(oe(),h(y(v)),U()):(k={type:"link",key:F},ie(Ge(o)),me(o)),i.stopPropagation()}),r.selectAll("circle").data(u,i=>i.id).join(i=>{const o=i.append("circle").attr("r",te).attr("stroke","#333").attr("stroke-width",1);return o.each(function(F){var ee;const X=I.get(F.id);if(X){const be=`pat-${At(F.id)}`;E.append("pattern").attr("id",be).attr("patternUnits","objectBoundingBox").attr("patternContentUnits","objectBoundingBox").attr("width",1).attr("height",1).append("image").attr("href",X).attr("xlink:href",X).attr("x",0).attr("y",0).attr("width",1).attr("height",1).attr("preserveAspectRatio","xMidYMid slice"),Y(this).attr("fill",`url(#${be})`)}else Y(this).attr("fill",Ve(((ee=F.groups)==null?void 0:ee[0])??"other"))}),o}).on("pointerenter",(i,o)=>{x()||(ne(o.id),ie(ge(o)))}).on("pointerleave",()=>{x()||(se(),le(!0))}).on("pointerdown",(i,o)=>{(k==null?void 0:k.type)==="node"&&k.id===o.id?(oe(),h(y(v)),U()):(k={type:"node",id:o.id},ie(ge(o)),h(y(v)),U(),ne(o.id)),i.stopPropagation()}).call(Ze()),Y(H).on("pointerdown",()=>{oe(),s(3,O=!1),h(y(v)),U()});const e=new Set(u.map(i=>i.id)),l=C.filter(i=>{var X,ee;const o=((X=i.source)==null?void 0:X.id)??i.source,F=((ee=i.target)==null?void 0:ee.id)??i.target;return e.has(o)&&e.has(F)}),c=C.length-l.length;c&&console.warn(`Dropped ${c} links with missing nodes`),P=gt(u).force("link",mt(l).id(i=>i.id).strength(i=>i.strength??1).distance(20)).force("charge",_t().strength(-50)).force("collide",kt().radius(i=>te(i)+6)).force("center",Me(b/2,_/2)).force("x",yt(b/2).strength(.08)).force("y",bt(_/2).strength(.08)).on("tick",()=>{u.forEach(We),he.attr("x1",i=>i.source.x).attr("y1",i=>i.source.y).attr("x2",i=>i.target.x).attr("y2",i=>i.target.y),r.selectAll("circle").attr("cx",i=>i.x).attr("cy",i=>i.y)}),ye(),ke(),U(),h(y(v))}function ye(){if(!H)return;const e=Math.round(H.clientWidth||800),l=window.matchMedia("(max-width: 640px)").matches;b=e,_=l?600:Math.max(420,Math.min(860,Math.round(e*.68))),z.attr("width",b).attr("height",_),P==null||P.force("center",Me(b/2,_/2)).alpha(.4).restart(),ke()}function Ze(){function e(i,o){i.active||P.alphaTarget(.3).restart(),o.fx=o.x,o.fy=o.y}function l(i,o){const F=te(o)+Ne;o.fx=Math.max(F,Math.min(b-F,i.x)),o.fy=Math.max(F,Math.min(_-F,i.y))}function c(i,o){i.active||P.alphaTarget(0),o.fx=null,o.fy=null}return wt().on("start",e).on("drag",l).on("end",c)}let fe,ue;dt(()=>{Ye();try{window.pym&&(ce=new window.pym.Child)}catch{}ue=()=>_e(),window.addEventListener("load",ue),fe=()=>{ye(),_e()},window.addEventListener("resize",fe)}),ht(()=>{window.removeEventListener("resize",fe),window.removeEventListener("load",ue),P==null||P.stop()});function Qe(e){ze.call(this,t,e)}function Ie(e){ze.call(this,t,e)}const xe=()=>$("all"),$e=e=>$(e),et=()=>s(3,O=!O),tt=()=>$("all"),nt=e=>$(e);function st(){v=this.value,s(0,v)}const it=e=>{e.key==="Escape"&&j()};function lt(e){Ce[e?"unshift":"push"](()=>{G=e,s(6,G)})}function at(e){Ce[e?"unshift":"push"](()=>{H=e,s(5,H)})}return[v,S,d,O,J,H,G,re,pe,w,j,Q,$,Qe,Ie,xe,$e,et,tt,nt,st,it,lt,at]}class Lt extends rt{constructor(n){super(),ot(this,n,Ct,vt,Re,{},null,[-1,-1,-1])}}new Lt({target:document.getElementById("app")});
